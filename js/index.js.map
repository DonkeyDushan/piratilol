{
  "version": 3,
  "sources": ["../../build/js/data.js", "../../build/js/helperFunctions.js", "../../build/js/index.js"],
  "sourcesContent": ["export const claims = [\r\n  \"Mladým: víte, že dokážete rozhodnout volby?\",\r\n  \"Hnutí ano prostě chce žít v minulosti bez perspektivy.\",\r\n  \"Boj s korupcí, ne udávání lidí.\",\r\n  \"Investice do sportu a kultury jsou zárukou zdravé společnosti.\",\r\n  \"Potřebujeme obnovit rovnováhu přírody!\",\r\n  \"Byty je třeba stavět, ne danit.\",\r\n  \"Nejvyšší čas zastavit zadlužování naší země!\",\r\n  \"udělejme z česka sebevědomého spojence\",\r\n  \"Místo byrokratického pekla skutečná digitalizace\",\r\n  \"Staňme se digitálním tygrem!\",\r\n  \"Veřejné finance průhledně a čistě\",\r\n  \"Dítě potřebuje náruč jedné pečující osoby!\",\r\n  \"Politik má sloužit lidem a nutit stát, aby fungoval stejně\",\r\n  \"Podpořte finančně piráty a starosty\",\r\n  \"pojďme postavit ekonomiku na nohy\",\r\n  \"2 % z rozpočtu pro armádu vybojujeme!\",\r\n  \"kultura si zaslouží 1 % z rozpočtu\",\r\n  \"na šikaně živnostníků se podílet nebudeme\",\r\n  \"skutečně digitální stát, na co máme internet?\",\r\n  \"pojďme zreformovat školství. od základů.\",\r\n  \"finance řízené podle plánu\",\r\n  \"vraťme lesům jejich zdraví\",\r\n  \"1000 korun pro každého seniora z dotací Agrofertu. Ať si pan Babiš platí předvolební dárečky ze svého.\",\r\n  \"Máme už dost nekonečných korupčních kauz. Po volbách s nimi zatočíme.\",\r\n  \"Místo jednolitých polí pestrá krajina.\",\r\n  \"je čas vyrazit pomoci na jižní moravu!\",\r\n];\r\n\r\nexport const generators = [\r\n  { url: \"https://picsum.photos/800\", weight: 5 },\r\n  { url: \"https://source.unsplash.com/800x800\", weight: 10 },\r\n  { url: \"https://source.unsplash.com/800x800/?communism\", weight: 3 },\r\n  { url: \"https://source.unsplash.com/800x800/?cat\", weight: 1 },\r\n  { url: \"https://source.unsplash.com/800x800/?puppy\", weight: 1 },\r\n  { url: \"https://source.unsplash.com/800x800/?chicken\", weight: 1 },\r\n  { url: \"https://source.unsplash.com/800x800/?angry\", weight: 3 },\r\n];\r\n", "export const splitText = (text, maxLineLength) => {\r\n  const result = [];\r\n  while (text.length > maxLineLength) {\r\n    let pos = text.substring(0, maxLineLength).lastIndexOf(\" \");\r\n    pos = pos <= 0 ? maxLineLength : pos;\r\n    result.push(text.substring(0, pos));\r\n    let i = text.indexOf(\" \", pos) + 1;\r\n    if (i < pos || i > pos + maxLineLength) i = pos;\r\n    text = text.substring(i);\r\n  }\r\n  result.push(text);\r\n  return result;\r\n};\r\n\r\nexport const pickRandom = (arr) => arr[Math.floor(Math.random() * arr.length)];\r\n", "import { claims, generators } from \"./data.js\";\r\nimport { splitText, pickRandom } from \"./helperFunctions.js\";\r\n\r\nconst unrolledGenerators = generators.flatMap(({ url, weight }) => Array(weight).fill(url));\r\n\r\nconst imageReader = new FileReader();\r\nconst logo = new Image();\r\nlogo.src = \"public/logo.png\";\r\nlet currentImage = new Image();\r\nlet currentText = \"Test text\";\r\n\r\nconst rerollImage = async () => {\r\n  const imageData = await fetch(pickRandom(unrolledGenerators));\r\n\r\n  return new Promise((resolve) => {\r\n    const image = new Image();\r\n\r\n    image.addEventListener(\"load\", () => {\r\n      currentImage = image;\r\n      resolve();\r\n    });\r\n\r\n    image.crossOrigin = \"anonymous\";\r\n    image.src = imageData.url;\r\n  });\r\n};\r\n\r\nconst rerollText = () => {\r\n  currentText = pickRandom(claims);\r\n};\r\n\r\nconst canvas = document.getElementById(\"picture\");\r\nconst ctx = canvas.getContext(\"2d\");\r\nconst font = new FontFace(\"Bebas Neue\", \"url(public/BebasNeue-Bold.ttf)\");\r\n\r\nconst initFont = async () => {\r\n  await font.load();\r\n  document.fonts.add(font);\r\n};\r\n\r\nconst setFile = (file) => {\r\n  if (!file.type.startsWith(\"image/\")) {\r\n    return;\r\n  }\r\n\r\n  imageReader.readAsDataURL(file);\r\n};\r\n\r\ncanvas.addEventListener(\"dragover\", (e) => e.preventDefault());\r\n\r\ncanvas.addEventListener(\"drop\", (e) => {\r\n  e.preventDefault();\r\n  if (!e.dataTransfer || e.dataTransfer.files.length <= 0) {\r\n    return;\r\n  }\r\n\r\n  setFile(e.dataTransfer.files[0]);\r\n});\r\n\r\nconst repaintImage = async () => {\r\n  // clear to black (for transparent images)\r\n  ctx.fillStyle = \"black\";\r\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n  // scale image to always fill the canvas\r\n  const scaleX = canvas.width / currentImage.width;\r\n  const scaleY = canvas.height / currentImage.height;\r\n  const scale = Math.max(scaleX, scaleY);\r\n  ctx.setTransform(scale, 0, 0, scale, 0, 0);\r\n  ctx.drawImage(currentImage, 0, 0);\r\n\r\n  ctx.setTransform(); // reset so that everything else is normal size\r\n  ctx.drawImage(logo, 525, 20);\r\n\r\n  const lines = splitText(currentText, 20).reverse();\r\n  const fontSize = lines.length < 5 ? 60 : 40;\r\n  ctx.font = `${fontSize}px 'Bebas Neue'`;\r\n  lines.forEach((line, index) => {\r\n    const x = 30;\r\n    const y = 685;\r\n    const padding = 15;\r\n    const lineHeight = padding + fontSize;\r\n    ctx.fillStyle = \"#f9dc4d\";\r\n    ctx.fillRect(x, y - (index * lineHeight), ctx.measureText(line).width + 2 * padding, lineHeight);\r\n    ctx.textBaseline = \"top\";\r\n    ctx.fillStyle = \"black\";\r\n    ctx.fillText(line, x + padding, y + padding - (index * lineHeight));\r\n  });\r\n\r\n  imageReader.addEventListener(\"load\", (e) => {\r\n    currentImage = new Image();\r\n    currentImage.addEventListener(\"load\", () => repaintImage());\r\n    currentImage.src = e.target.result;\r\n  });\r\n\r\n  const linkSave = document.getElementById(\"save\");\r\n  linkSave.setAttribute(\"download\", \"PirStanKampan.png\");\r\n  setTimeout(() => {\r\n    linkSave.setAttribute(\"href\", canvas.toDataURL(\"image/png\").replace(\"image/png\", \"image/octet-stream\"));\r\n  }, 500);\r\n};\r\n\r\nconst buttonRandom = document.getElementById(\"randomize\");\r\nbuttonRandom.onclick = async () => {\r\n  rerollText();\r\n  await rerollImage();\r\n  repaintImage();\r\n};\r\n\r\nconst buttonRandomImg = document.getElementById(\"randomize-img\");\r\nbuttonRandomImg.onclick = async () => {\r\n  await rerollImage();\r\n  repaintImage();\r\n};\r\n\r\nconst buttonRandomText = document.getElementById(\"randomize-text\");\r\nbuttonRandomText.onclick = () => {\r\n  rerollText();\r\n  repaintImage();\r\n};\r\n\r\nconst inputCustomImg = document.getElementById(\"customImage\");\r\ninputCustomImg.addEventListener(\"change\", (e) => {\r\n  e.preventDefault();\r\n  if (e.target.files.length <= 0) {\r\n    return;\r\n  }\r\n  setFile(e.target.files[0]);\r\n});\r\nconst buttonCustomImg = document.getElementById(\"customImageBtn\");\r\nbuttonCustomImg.addEventListener(\"click\", () => {\r\n  inputCustomImg.click();\r\n});\r\n\r\nconst inputCustom = document.getElementById(\"customText\");\r\nconst buttonCustom = document.getElementById(\"submitCustomText\");\r\nbuttonCustom.onclick = async () => {\r\n  if (inputCustom.value) {\r\n    currentText = inputCustom.value;\r\n    repaintImage();\r\n  }\r\n};\r\n\r\ninitFont();\r\n\r\nrerollText();\r\nrerollImage()\r\n  .then(() => repaintImage());\r\n"],
  "mappings": "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",
  "names": []
}
